<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Users">
	<insert id="add" parameterType="user">
		insert into users 
		values(
		#{user_id},#{user_password},#{user_profile},
		#{user_profile_original}
		,#{user_email},'0',0,sysdate
		)
	</insert>
	<select id="idcheck" resultType="user" parameterType="String">
		select * from users where user_id = #{user_id}
	</select>
	<select id="count" resultType="int">
		select count(*) from board
	</select>
	<update id="update_mail_auth_key" parameterType="map">
		update users
		set user_mail_authkey = #{user_mail_authkey}
		where user_id = #{user_id}
	</update>
	<update id="userAuth" parameterType="map">
		<![CDATA[
			update users
			set user_mail_auth = 1
			where (select count(*) from users
					where user_mail_authkey = #{user_mail_authkey} and user_email = #{user_email})
			> 0
			and user_id = #{user_id}
		]]>
	</update>
</mapper>